<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VAIRAL VIDEO - All Video PLAY</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        :root { --primary: #8a2be2; --secondary: #4b0082; --bg: #0f0f0f; }
        body { background: var(--bg); color: white; font-family: 'Hind Siliguri', sans-serif; margin: 0; padding: 0; }
        
        /* ‡¶â‡¶™‡¶∞‡ßá‡¶∞ ‡¶∏‡ßÅ‡¶®‡ßç‡¶¶‡¶∞ ‡¶π‡ßá‡¶°‡¶æ‡¶∞ */
        .hero { background: linear-gradient(135deg, var(--primary), var(--secondary)); padding: 40px 20px; text-align: center; border-radius: 0 0 30px 30px; box-shadow: 0 10px 20px rgba(0,0,0,0.5); }
        .hero h1 { margin: 0; font-size: 28px; font-weight: bold; text-transform: uppercase; letter-spacing: 2px; }
        .hero p { font-size: 14px; opacity: 0.9; margin-top: 10px; line-height: 1.6; }

        /* ‡¶∏‡¶æ‡¶∞‡ßç‡¶ö ‡¶¨‡¶ï‡ßç‡¶∏ ‡¶°‡¶ø‡¶ú‡¶æ‡¶á‡¶® */
        .search-container { margin: -25px 20px 20px 20px; position: relative; z-index: 10; }
        .search-box { width: 100%; padding: 15px 20px; border-radius: 50px; border: none; background: white; color: #333; box-shadow: 0 5px 15px rgba(0,0,0,0.2); font-size: 16px; box-sizing: border-box; }

        /* ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶ï‡¶æ‡¶∞‡ßç‡¶° ‡¶°‡¶ø‡¶ú‡¶æ‡¶á‡¶® */
        .content { padding: 20px; }
        .section-title { border-left: 4px solid var(--primary); padding-left: 10px; margin-bottom: 20px; font-size: 20px; }
        .card { background: #1e1e1e; border-radius: 20px; overflow: hidden; margin-bottom: 25px; border: 1px solid #333; transition: 0.3s; }
        .thumb-wrapper { position: relative; height: 200px; }
        .thumb { width: 100%; height: 100%; object-fit: cover; }
        .card-body { padding: 15px; }
        .card-body h3 { margin: 0; font-size: 18px; color: #fff; }
        .card-body p { color: #aaa; font-size: 13px; margin: 8px 0; }
        
        /* ‡¶¨‡¶æ‡¶ü‡¶® ‡¶°‡¶ø‡¶ú‡¶æ‡¶á‡¶® */
        .unlock-btn { background: linear-gradient(to right, #8e2de2, #4a00e0); color: white; border: none; padding: 12px; width: 100%; border-radius: 12px; font-weight: bold; font-size: 15px; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 10px; }
        
        /* ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶ì‡¶≠‡¶æ‡¶∞‡¶≤‡ßá ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ */
        #ad-view { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 10000; flex-direction: column; justify-content: center; align-items: center; }
        .timer-circle { width: 100px; height: 100px; border: 5px solid #f00; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-size: 40px; font-weight: bold; margin-bottom: 30px; color: #fff; }
        .ad-instruction { font-size: 18px; color: #ccc; margin-bottom: 20px; text-align: center; padding: 0 20px; }
        .final-btn { background: #0088cc; color: white; padding: 15px 40px; border-radius: 50px; text-decoration: none; font-weight: bold; font-size: 18px; display: none; box-shadow: 0 0 20px rgba(0,136,204,0.5); }
    </style>
</head>
<body>

    <div class="hero">
        <h1>All Video PLAY üîû</h1>
        <p>‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶® ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®, ‡¶Ü‡¶®‡¶≤‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶Ø‡¶æ ‡¶∏‡¶∞‡¶æ‡¶∏‡¶∞‡¶ø ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶á‡¶®‡¶¨‡¶ï‡ßç‡¶∏‡ßá ‡¶ö‡¶≤‡ßá ‡¶Ø‡¶æ‡¶¨‡ßá ‡¶Ö‡¶ü‡ßã‡•§</p>
    </div>

    <div class="search-container">
        <input type="text" class="search-box" placeholder="üîç ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ö‡¶®‡ßÅ‡¶∏‡¶®‡ßç‡¶ß‡¶æ‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®...">
    </div>

    <div class="content">
        <div class="section-title">‡¶â‡¶™‡¶≤‡¶¨‡ßç‡¶ß ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì</div>
        <div id="video-list">‡¶≤‡ßã‡¶°‡¶ø‡¶Ç ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</div>
    </div>

    <div id="ad-view">
        <div class="timer-circle" id="timer">10</div>
        <p class="ad-instruction" id="ad-msg">‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶® ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</p>
        <a href="#" id="ad-btn" class="final-btn" target="_blank">‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶®‡¶ü‡¶ø ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</a>
    </div>

    <script>
        // ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ Firebase ‡¶ï‡¶æ‡¶®‡ßá‡¶ï‡¶∂‡¶®
        const firebaseConfig = { databaseURL: "https://myvideobot-9f9ee-default-rtdb.firebaseio.com/" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        // ‡¶°‡¶æ‡¶ü‡¶æ‡¶¨‡ßá‡¶∏ ‡¶•‡ßá‡¶ï‡ßá ‡¶§‡¶•‡ßç‡¶Ø ‡¶Ü‡¶®‡¶æ
        db.ref('videos').on('value', (snapshot) => {
            const data = snapshot.val();
            const container = document.getElementById('video-list');
            container.innerHTML = "";
            for (let id in data) {
                container.innerHTML += `
                    <div class="card">
                        <div class="thumb-wrapper">
                            <img src="${data[id].photo}" class="thumb" onerror="this.src='https://via.placeholder.com/400x200?text=Thumbnail+Not+Found'">
                        </div>
                        <div class="card-body">
                            <h3>${data[id].name}</h3>
                            <p>üîû ${data[id].ads ? data[id].ads.length : 0} ‡¶ü‡¶æ Ads ‡¶¶‡ßá‡¶ñ‡ßã ‡¶Ü‡¶∞ ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶¶‡ßá‡¶ñ‡ßã</p>
                            <button class="unlock-btn" onclick="startAdFlow('${id}', ${JSON.stringify(data[id].ads)})">
                                üîí ‡¶Ü‡¶®‡¶≤‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶® (0/${data[id].ads ? data[id].ads.length : 0})
                            </button>
                        </div>
                    </div>`;
            }
        });

        let currentAds = [];
        let vId = "";
        let step = 0;

        function startAdFlow(id, ads) {
            vId = id; currentAds = ads; step = 0;
            if(!ads || ads.length === 0) {
                window.location.href = `https://t.me/vairal_video18_bot?start=${vId}`;
                return;
            }
            showAdScreen();
        }

        function showAdScreen() {
            document.getElementById('ad-view').style.display = 'flex';
            document.getElementById('ad-btn').style.display = 'none';
            document.getElementById('ad-msg').innerText = `‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶® ${step + 1} ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...`;
            
            let timeLeft = 10;
            const clock = setInterval(() => {
                document.getElementById('timer').innerText = timeLeft;
                if (timeLeft <= 0) {
                    clearInterval(clock);
                    document.getElementById('ad-msg').innerText = "‡¶®‡¶ø‡¶ö‡ßá‡¶∞ ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßá ‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶®‡¶ü‡¶ø ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®";
                    const btn = document.getElementById('ad-btn');
                    btn.style.display = 'block';
                    btn.href = currentAds[step];
                    
                    btn.onclick = () => {
                        step++;
                        if (step < currentAds.length) {
                            setTimeout(showAdScreen, 1500); 
                        } else {
                            document.getElementById('ad-msg').innerText = "‡¶Ö‡¶≠‡¶ø‡¶®‡¶®‡ßç‡¶¶‡¶®! ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶Ü‡¶®‡¶≤‡¶ï ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§";
                            setTimeout(() => {
                                window.location.href = `https://t.me/vairal_video18_bot?start=${vId}`;
                            }, 2000);
                        }
                    };
                }
                timeLeft--;
            }, 1000);
        }
    </script>
</body>
</html>
